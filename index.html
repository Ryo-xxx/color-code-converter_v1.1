<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰å¤‰æ› | Open Source</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="container">
    <h1>ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰å¤‰æ›</h1>
    <p class="sub">HEXA â‡„ RGBA / CMYKA / HSVA / HSLA / HWBA<br>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¤‰æ›ã¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒã§ãã¾ã™ã€‚</p>
  </header>

  <main class="container grid">
    <section class="card">
      <h2>ç¾åœ¨ã®è‰²</h2>
      <div id="swatch" class="swatch"></div>

      <div class="row">
        <label for="hex6">HEX</label>
        <div class="input-copy">
          <input id="hex6" type="text" value="#000000" spellcheck="false" />
          <button class="copy-btn" data-copy="#hex6" aria-label="ã‚³ãƒ”ãƒ¼">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
          </button>
        </div>
        <div></div>
      </div>

      <div class="row">
        <label for="hex">HEXA</label>
        <div class="input-copy">
          <input id="hex" type="text" value="#000000ff" spellcheck="false" />
          <button class="copy-btn" data-copy="#hex" aria-label="ã‚³ãƒ”ãƒ¼">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
          </button>
        </div>
        <div></div>
      </div>

      <div class="row alpha-row">
        <label for="picker">HEX ãƒ”ãƒƒã‚«ãƒ¼</label>
        <div class="picker-wrap">
          <input id="picker" type="color" value="#000000" />
          <div class="alpha-control">
            <input id="pickerA" type="range" min="0" max="1" step="0.01" value="1" />
            <output id="pickerAOut">1</output>
            <label for="pickerA" class="alpha-label">(é€æ˜åº¦)</label>
          </div>
        </div>
      </div>

      <!-- Discord é€£æºãƒœã‚¿ãƒ³è¡Œï¼ˆè¿½åŠ ï¼‰ -->
      <div class="row">
        <label>Discordé€£æº</label>
        <div>
          <button id="apply-to-discord" class="apply-btn" type="button" disabled>ğŸ¨ Discordã¸é©ç”¨</button>
          <small id="apply-status" class="muted" style="display:block;margin-top:6px;"></small>
        </div>
        <div></div>
      </div>
    </section>
  </main>

  <section class="container">
    <div class="card">
      <h2>æ–‡å­—è‰²ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h2>
      <div class="row">
        <label for="nameText">è¡¨ç¤ºã™ã‚‹æ–‡å­—</label>
        <input id="nameText" type="text" value="Sample" maxlength="32" />
        <button id="nameReset" type="button">ãƒªã‚»ãƒƒãƒˆ</button>
      </div>

      <div class="preview-grid four-tiles" aria-label="èƒŒæ™¯åˆ¥ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">
        <div class="preview-card bg-white2"><div class="preview-inner"><span class="preview-text">Sample</span><div class="preview-meta">èƒŒæ™¯: ãƒ›ãƒ¯ã‚¤ãƒˆ</div></div></div>
        <div class="preview-card bg-ash"><div class="preview-inner"><span class="preview-text">Sample</span><div class="preview-meta">èƒŒæ™¯: ã‚¢ãƒƒã‚·ãƒ¥</div></div></div>
        <div class="preview-card bg-dark"><div class="preview-inner"><span class="preview-text">Sample</span><div class="preview-meta">èƒŒæ™¯: ãƒ€ãƒ¼ã‚¯</div></div></div>
        <div class="preview-card bg-onyx"><div class="preview-inner"><span class="preview-text">Sample</span><div class="preview-meta">èƒŒæ™¯: ãƒ–ãƒ©ãƒƒã‚¯</div></div></div>
      </div>

      <div class="copyrow">
        <code>color: <span id="cssVarCode">rgba(0, 0, 0, 1)</span>;</code>
        <button data-copy-text="#cssVarCode">ã‚³ãƒ”ãƒ¼</button>
      </div>

      <p class="note">ã€ä½¿ã„æ–¹ã€‘<br>HEXãƒ”ãƒƒã‚«ãƒ¼ã‹ã‚‰å¥½ããªè‰²ã‚’æ±ºã‚ã¦ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã ã‘ã®ç°¡å˜æ“ä½œï¼<br>æ–‡å­—è‰²ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§è¡¨ç¤ºã—ãŸã„æ–‡å­—ã‚’å…¥åŠ›ã™ã‚‹ã¨4è‰²ã®èƒŒæ™¯ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br>è‰²ãŒæ±ºã¾ã£ãŸã‚‰â¡Discordã¸é©ç”¨</p>
    </div>
  </section>

  <footer class="container">
    <p>MIT License. Â© 2025 Color code converter</p>
  </footer>

  <script src="./main.js"></script>

  <!-- Discordé€£æºã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆè¿½åŠ ï¼‰ï¼šmain.jsã®å¾Œã«ç½®ã -->
  <script>
  (() => {
    const params = new URLSearchParams(location.search);
    const token = params.get('t');

    const btn = document.getElementById('apply-to-discord');
    const status = document.getElementById('apply-status');

    // TODO: Renderç­‰ã§å…¬é–‹ã—ã¦ã„ã‚‹ãƒœãƒƒãƒˆã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆURLã«ç½®ãæ›ãˆã¦ãã ã•ã„
    const ENDPOINT = 'https://YOUR-ENDPOINT-DOMAIN/apply'; // ä¾‹: https://ryo-color-bot.onrender.com/apply

    const getHex6 = () => {
      const el = document.querySelector('#hex6');
      return (el?.value || '').trim();
    };

    if (token) {
      btn.disabled = false;
      status.textContent = 'ãƒˆãƒ¼ã‚¯ãƒ³OKï¼šè‰²ã‚’é¸ã‚“ã§ã€ŒDiscordã¸é©ç”¨ã€ã‚’æŠ¼ã—ã¦ã­ã€‚';
    } else {
      btn.disabled = true;
      status.textContent = 'ãƒˆãƒ¼ã‚¯ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“ï¼ˆDiscordã§ /color_web ã‹ã‚‰é–‹ã„ã¦ã­ï¼‰';
    }

    btn?.addEventListener('click', async () => {
      const hex6 = getHex6();
      if (!/^#?[0-9a-fA-F]{6}$/.test(hex6)) {
        status.textContent = 'HEX(6æ¡)ãŒä¸æ­£ã£ã½ã„ã‚ˆã€‚';
        return;
      }
      try {
        btn.disabled = true;
        status.textContent = 'é€ä¿¡ä¸­â€¦';

        const res = await fetch(ENDPOINT, {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify({ t: token, hex: hex6 })
        });
        const data = await res.json();

        if (data.ok) {
          status.textContent = 'âœ… åæ˜ å®Œäº†ï¼Discordå´ã§è‰²ãŒå¤‰ã‚ã‚‹ã®ã‚’ç¢ºèªã—ã¦ã­ã€‚';
        } else {
          status.textContent = 'âŒ ã‚¨ãƒ©ãƒ¼: ' + (data.msg || 'unknown');
        }
      } catch (e) {
        status.textContent = 'âŒ é€šä¿¡ã‚¨ãƒ©ãƒ¼: ' + e;
      } finally {
        if (token) btn.disabled = false;
      }
    });
  })();
  </script>
</body>
</html>
